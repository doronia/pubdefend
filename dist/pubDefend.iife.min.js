!function(){"use strict";var n=window.pubDefend||window.pubdefend||{};n.state={},n.store={},n.o=[],n.t=[],n.domain="sponser.co.il";var e="_pbdfndEvents",o={domain:"pubdefend.com",i:"c",u:"ws",l:"ad_banner.js"};var t="undefined"!=typeof window,r=t&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),i=(t&&document.createElement("p"),/iPhone|iPad|iPod|Android/i.test(navigator.userAgent));function a(n){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function u(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(n)))return;var o=[],t=!0,r=!1,i=void 0;try{for(var a,u=n[Symbol.iterator]();!(t=(a=u.next()).done)&&(o.push(a.value),!e||o.length!==e);t=!0);}catch(n){r=!0,i=n}finally{try{t||null==u.return||u.return()}finally{if(r)throw i}}return o}(n,e)||c(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(n,e){if(n){if("string"==typeof n)return f(n,e);var o=Object.prototype.toString.call(n).slice(8,-1);return"Object"===o&&n.constructor&&(o=n.constructor.name),"Map"===o||"Set"===o?Array.from(n):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?f(n,e):void 0}}function f(n,e){(null==e||e>n.length)&&(e=n.length);for(var o=0,t=new Array(e);o<e;o++)t[o]=n[o];return t}var d=Object.entries?Object.entries:function(n){return Object.keys(n).reduce((function(e,o){return e.push([o,n[o]]),e}),[])};var l=function(n,e){var o=window,t=o.screen,r=o.userAgent,i=o.language,a=o.languages,c=o.platform,f=o.hardwareConcurrency,l=o.deviceMemory,s=t.colorDepth,g=t.availHeight,v=t.availWidth,w=d(o.navigator.plugins).map((function(n){return u(n,2)[1].name})),p=(new Date).getTimezoneOffset(),m=Intl.DateTimeFormat().resolvedOptions().timeZone,b="ontouchstart"in window,y=function(){try{var n=document.createElement("canvas"),e=n.getContext("2d");return e.textBaseline="top",e.font="14px 'Arial'",e.textBaseline="alphabetic",e.fillStyle="#f60",e.fillRect(125,1,62,20),e.fillStyle="#069",e.fillText("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ`~1!2@3#4$5%6^7&8*9(0)-_=+[{]}|;:',<.>/?",2,15),e.fillStyle="rgba(102, 204, 0, 0.7)",e.fillText("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ`~1!2@3#4$5%6^7&8*9(0)-_=+[{]}|;:',<.>/?",4,17),n.toDataURL()}catch(n){return n}}(),h=window.doNotTrack||navigator.doNotTrack||navigator.msDoNotTrack||"g"in window.external?!("1"!=window.doNotTrack&&"yes"!=navigator.doNotTrack&&"1"!=navigator.doNotTrack&&"1"!=navigator.msDoNotTrack&&!window.external.g()):void 0,S=function(n){for(var e,o,t,r=3&n.length,i=n.length-r,a=3432918353,u=461845907,c=0;c<i;c++)t=255&n.charCodeAt(c)|(255&n.charCodeAt(++c))<<8|(255&n.charCodeAt(++c))<<16|(255&n.charCodeAt(++c))<<24,++c,e=27492+(65535&(o=5*(65535&(e=(e^=t=(65535&(t=(t=(65535&t)*a+(((t>>>16)*a&65535)<<16)&4294967295)<<15|t>>>17))*u+(((t>>>16)*u&65535)<<16)&4294967295)<<13|e>>>19))+((5*(e>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);var f=i-1;switch(t=0,r){case 3:t^=(255&n.charCodeAt(f+2))<<16;break;case 2:t^=(255&n.charCodeAt(f+1))<<8;break;case 1:t^=255&n.charCodeAt(f)}return e^=t=(65535&(t=(t=(65535&t)*a+(((t>>>16)*a&65535)<<16)&4294967295)<<15|t>>>17))*u+(((t>>>16)*u&65535)<<16)&4294967295,e^=n.length,e=2246822507*(65535&(e^=e>>>16))+((2246822507*(e>>>16)&65535)<<16)&4294967295,e=3266489909*(65535&(e^=e>>>13))+((3266489909*(e>>>16)&65535)<<16)&4294967295,(e^=e>>>16)>>>0}(n?JSON.stringify({platform:c,hardwareConcurrency:f,deviceMemory:l,colorDepth:s,availWidth:v,availHeight:g,v:b,canvas:y}):JSON.stringify({userAgent:r,language:i,languages:a,platform:c,hardwareConcurrency:f,deviceMemory:l,plugins:w,colorDepth:s,availWidth:v,availHeight:g,p:p,m:m,v:b,canvas:y,doNotTrack:h}));if(!e)return S;e(S)},s=l(!0),g=l(!1),v=function(n){return"object"===a(n)&&function(n){return null!=n}(n)&&!Array.isArray(n)&&!(n instanceof RegExp)&&!(n instanceof String)&&!(n instanceof Number)};function w(n,e,o){var t=n.split(e);return t.slice(0,o-1).concat(t.length>=o?t.slice(o-1).join(e):[])}var p=function(n){var e,o,t=n+"=",r=document.cookie.split(";");for(e=0;e<r.length;e++){for(o=r[e];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return unescape(o.substring(t.length,o.length))}return null};function m(n){if(n&&document.getElementById("log")){var e=document.createElement("li");e.className="text-small font-normal",e.style.cssText="color: #99b8fd";var o=document.createTextNode(n);e.appendChild(o),document.getElementById("log").appendChild(e)}}function b(n,e,o){if(v(n))if(n.hasOwnProperty(e)||(n[e]=o),n[e]=o,v(o)){var t,r=function(n,e){var o;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(o=c(n))||e&&n&&"number"==typeof n.length){o&&(n=o);var t=0,r=function(){};return{s:r,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(n){throw n},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){o=n[Symbol.iterator]()},n:function(){var n=o.next();return a=n.done,n},e:function(n){u=!0,i=n},f:function(){try{a||null==o.return||o.return()}finally{if(u)throw i}}}}(d(o));try{for(r.s();!(t=r.n()).done;){var i=u(t.value,2);m(e+"::"+i[0]+": "+i[1])}}catch(n){r.e(n)}finally{r.f()}}else m(e+": "+o)}function y(e){var o=n.store,t=JSON.stringify(o);return e?btoa(t):o}function h(n,e){if(n){var o,t=e||"none",r=n;try{o=new CustomEvent(r,{detail:{data:t}})}catch(n){(o=document.createEvent("CustomEvent")).initCustomEvent(r,!1,!1,{data:t})}window.dispatchEvent(o)}}var S={h:function(n){var e,o=[];if(!n||!n.length)return o;for(e=0;e<n.length;e++)o.push(n[e]);return o},find:function(n){if(!document.querySelectorAll||!n)return[];var e=document.querySelectorAll(n);return this.h(e)},S:function(n){if(!n||!n.length)return[];var e,o,t=[];for(e=0;e<n.length;e++)o=this.find(n[e]),t=t.concat(o);return t=this.O(t)},j:function(n,e){if(!n||!e||!n.getElementsByTagName)return[];var o=n.getElementsByTagName(e);return this.h(o)}},O=n.store,j=0,A=!1;var E,k=function(n,e){var o=e.slot,t=o.getSlotElementId();document.getElementById(t);if(logger.group("Slot",o.getSlotElementId(),"finished rendering."),logger.log("Is empty?:",e.A),logger.log("Size:",e.size),logger.groupEnd(),!A){var r=S.find('div[id*="google_ad"]');b(O,"gtag_impr",r.length),h("impr",r.length),n&&n(r)}A=!0},I=function(n){if(function(n){if(Array.isArray)return Array.isArray;Array.isArray=function(n){return"[object Array]"===Object.prototype.toString.call(n)}}()){var e={};n.forEach((function(n){!!n.firstElementChild.nodeName&&n.firstElementChild.nodeName&&(e[n.parentElement.id]={type:n.firstElementChild.nodeName,id:n.firstElementChild.id})})),e.k=Object.keys(e).length,logger.debug(e)}};function C(){var n="cid_"+parseInt(100*Math.random(),10),e=this;function o(){e.client.connect({onSuccess:t,onFailure:r,keepAliveInterval:30,useSSL:!0,timeout:3})}function t(){logger.log("pubdefend:: ws Connected"),e.client.subscribe(e.I,{qos:1}),h("wsLoaded")}function r(n){logger.log("Connect failed:"+n.errorMessage)}return e.I="test",e.client=new Paho.MQTT.Client("wss://ws.pubdefend.com/ws",n),e.client.onMessageArrived=function(n){},e.client.onConnectionLost=function(n){0!==n.errorCode&&(logger.log("Connection lost:"+n.errorMessage),o())},o(),e.C=function(n,o,t,r){var i=function(n,e,o,t){var r=new Paho.MQTT.Message(e);return r.destinationName=n,r.qos=Number(o)||0,r.N=!!t,r}(n,o,t&&t.qos,t&&t.T);r&&(i.qos<1?setTimeout(r):(i.M=r,messageCache.push(i))),e.client.send(i)},e.P=function(n,o){if(n){var t=new Paho.MQTT.Message(n);t.destinationName=e.I,o&&setTimeout(o),e.client.send(t)}},e}n.R=function(){var n={},o=p(e),t=JSON.parse(o);for(var r in t)n[t[r].L]=t[r].H;console.log(n),console.log(btoa(n))},n._=y;var x,N=n.store;function T(e){var o={};o.hardware=s,o.extended=g,b(N,"fingerprint",o);var r={};r.hostname=function(n){for(var e,o=[{key:"?",index:0},{key:"://",index:1},{key:"//",index:1},{key:"/",index:0},{key:":",index:0}],t=0,r=o.length,i=n;t<r;t++)i=(e=w(i,o[t].key,2)).length>1?e[o[t].index]:e[0];return i}(location.hostname),r.domain=n.domain,r.sameSite=-1!==r.hostname.indexOf(r.domain.toString()),r.pubid=function(n){var e=document.querySelector(n);if(null!=e)return{id:e.getAttribute("pub-defend-property"),options:e.getAttribute("pubdefend-opts")||"{}"}}("[pub-defend-property]").id,b(N,"publisher",r);var a=function(){if(t){var n=window.navigator.userAgent.toLowerCase();switch(!0){case n.indexOf("edge")>-1:return"Edge (EdgeHtml)";case n.indexOf("edg")>-1:return"Edge Chromium";case n.indexOf("opr")>-1&&!!window.opr:return"opera";case n.indexOf("chrome")>-1&&!!window.chrome:return"chrome";case n.indexOf("trident")>-1:return"IE";case n.indexOf("firefox")>-1:return"Firefox";case n.indexOf("safari")>-1:return"Safari";case n.indexOf("Opera")||n.indexOf("OPR")>-1:return"Opera";default:return"other"}}}();return b(N,"browser",a),b(N,"isMobile",i),e&&e("isReady"),"isReady"}function M(n){var e=5,o=window.googletag,t=setInterval((function(){o&&o.apiReady&&(logger.log("#"+e,"googaltag apiReady"),clearInterval(t),function(n){var e=window.googletag;j=googletag.pubads().getSlots().length,b(O,"gtag_slots",j),logger.log("googaltag slots:",j),e.pubads().addEventListener("slotRenderEnded",k.bind(null,I),!1),n&&n("blocked")}(n)),e<=0&&clearInterval(t),e-=1}),100)}t&&!r&&(!function(n){if(n&&window.console&&"function"==typeof console.log)window.logger={log:window.console.log.bind(console.log),error:window.console.error.bind(console.error),info:window.console.info.bind(console.info),warn:window.console.warn.bind(console.warn),group:window.console.group.bind(console.group),groupEnd:window.console.groupEnd.bind(console.groupEnd),debug:window.console.debug.bind(console.debug)};else{var e=function(){};window.logger={log:e,error:e,warn:e,info:e,group:e,groupEnd:e,debug:e}}}(n.debug),x=function(){logger.log("pubdefend:: init.."),M((function(n){logger.log("gtag::",n)})),T((function(e){var t,r,i,a,u,c,f;t=function(n){h("ab",n),b(N,"blocked",n)},i="https://"+(r=o).i+"."+r.domain+"/js/"+r.l,(a=new XMLHttpRequest).open("HEAD",i,!0),a.onload=function(n){if(a.readyState===XMLHttpRequest.DONE){var e=a.status;if(0===e||e>=200&&e<400)return void(t&&t(!1))}},a.onerror=function(n){t&&t(!0)},a.send(null),logger.log("pubdefend::",e),logger.log("pubdefend:: Loading paho lib"),u="https://"+o.i+"."+o.domain+"/js/mqttws31.min.js",c=function(){logger.info("pubdefend:: paho lib ready"),E=new C},(f=document.createElement("script")).type="text/javascript",f.src=u,f.readyState?f.onreadystatechange=function(){var n=this.readyState;"loaded"!==n&&"complete"!==n||(f.onreadystatechange=null,c&&c())}:c&&(f.onload=c),document.getElementsByTagName("head")[0].appendChild(f),window.addEventListener("wsLoaded",(function(e){n.state.D=!0,logger.info("pubdefend:: event-listen To Ws",e.detail),logger.info(y()),E.P(JSON.stringify(y()))}),!0),window.addEventListener("impr",(function(e){n.state.J=!0,logger.info("pubdefend:: event-impr",e.detail)}),!0),window.addEventListener("ab",(function(e){n.state.q=!0,logger.info("pubdefend:: event-ab",e.detail)}),!0)}))},"interactive"===document.readyState||"complete"===document.readyState?setTimeout(x,0):document.addEventListener("DOMContentLoaded",x))}();
