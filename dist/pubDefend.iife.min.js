!function(){"use strict";var n=window.pubDefend||window.pubdefend||{};n.state={ws:!1},n.store={},n.o=[],n.t=[];var e={i:"pubdefend.com",u:"c",ws:"ws",l:"ad_banner.js"};var o="undefined"!=typeof window,t=o&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),r=(o&&document.createElement("p"),/iPhone|iPad|iPod|Android/i.test(navigator.userAgent));function i(n){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function a(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(n)))return;var o=[],t=!0,r=!1,i=void 0;try{for(var a,u=n[Symbol.iterator]();!(t=(a=u.next()).done)&&(o.push(a.value),!e||o.length!==e);t=!0);}catch(n){r=!0,i=n}finally{try{t||null==u.return||u.return()}finally{if(r)throw i}}return o}(n,e)||u(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(n,e){if(n){if("string"==typeof n)return c(n,e);var o=Object.prototype.toString.call(n).slice(8,-1);return"Object"===o&&n.constructor&&(o=n.constructor.name),"Map"===o||"Set"===o?Array.from(n):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?c(n,e):void 0}}function c(n,e){(null==e||e>n.length)&&(e=n.length);for(var o=0,t=new Array(e);o<e;o++)t[o]=n[o];return t}var d=Object.entries?Object.entries:function(n){return Object.keys(n).reduce((function(e,o){return e.push([o,n[o]]),e}),[])};var f=function(n,e){var o=window,t=o.screen,r=o.userAgent,i=o.language,u=o.languages,c=o.platform,f=o.hardwareConcurrency,l=o.deviceMemory,s=t.colorDepth,w=t.availHeight,v=t.availWidth,p=d(o.navigator.plugins).map((function(n){return a(n,2)[1].name})),g=(new Date).getTimezoneOffset(),b=Intl.DateTimeFormat().resolvedOptions().timeZone,m="ontouchstart"in window,y=function(){try{var n=document.createElement("canvas"),e=n.getContext("2d");return e.textBaseline="top",e.font="14px 'Arial'",e.textBaseline="alphabetic",e.fillStyle="#f60",e.fillRect(125,1,62,20),e.fillStyle="#069",e.fillText("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ`~1!2@3#4$5%6^7&8*9(0)-_=+[{]}|;:',<.>/?",2,15),e.fillStyle="rgba(102, 204, 0, 0.7)",e.fillText("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ`~1!2@3#4$5%6^7&8*9(0)-_=+[{]}|;:',<.>/?",4,17),n.toDataURL()}catch(n){return n}}(),h=window.doNotTrack||navigator.doNotTrack||navigator.msDoNotTrack||"v"in window.external?!("1"!=window.doNotTrack&&"yes"!=navigator.doNotTrack&&"1"!=navigator.doNotTrack&&"1"!=navigator.msDoNotTrack&&!window.external.v()):void 0,S=function(n){for(var e,o,t,r=3&n.length,i=n.length-r,a=3432918353,u=461845907,c=0;c<i;c++)t=255&n.charCodeAt(c)|(255&n.charCodeAt(++c))<<8|(255&n.charCodeAt(++c))<<16|(255&n.charCodeAt(++c))<<24,++c,e=27492+(65535&(o=5*(65535&(e=(e^=t=(65535&(t=(t=(65535&t)*a+(((t>>>16)*a&65535)<<16)&4294967295)<<15|t>>>17))*u+(((t>>>16)*u&65535)<<16)&4294967295)<<13|e>>>19))+((5*(e>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);var d=i-1;switch(t=0,r){case 3:t^=(255&n.charCodeAt(d+2))<<16;break;case 2:t^=(255&n.charCodeAt(d+1))<<8;break;case 1:t^=255&n.charCodeAt(d)}return e^=t=(65535&(t=(t=(65535&t)*a+(((t>>>16)*a&65535)<<16)&4294967295)<<15|t>>>17))*u+(((t>>>16)*u&65535)<<16)&4294967295,e^=n.length,e=2246822507*(65535&(e^=e>>>16))+((2246822507*(e>>>16)&65535)<<16)&4294967295,e=3266489909*(65535&(e^=e>>>13))+((3266489909*(e>>>16)&65535)<<16)&4294967295,(e^=e>>>16)>>>0}(n?JSON.stringify({platform:c,hardwareConcurrency:f,deviceMemory:l,colorDepth:s,availWidth:v,availHeight:w,p:m,canvas:y}):JSON.stringify({userAgent:r,language:i,languages:u,platform:c,hardwareConcurrency:f,deviceMemory:l,plugins:p,colorDepth:s,availWidth:v,availHeight:w,m:g,h:b,p:m,canvas:y,doNotTrack:h}));if(!e)return S;e(S)},l=f(!0),s=f(!1),w=function(n){return"object"===i(n)&&function(n){return null!=n}(n)&&!Array.isArray(n)&&!(n instanceof RegExp)&&!(n instanceof String)&&!(n instanceof Number)};function v(n,e,o){var t=n.split(e);return t.slice(0,o-1).concat(t.length>=o?t.slice(o-1).join(e):[])}function p(n){if(n&&document.getElementById("log")){var e=document.createElement("li");e.className="text-small font-normal",e.style.cssText="color: #99b8fd";var o=document.createTextNode(n);e.appendChild(o),document.getElementById("log").appendChild(e)}}var g=n.o;function b(n,e){n||(g[n]=e)}function m(n,e,o){if(w(n))if(n[e]=o,w(o)){var t,r=function(n,e){var o;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(o=u(n))||e&&n&&"number"==typeof n.length){o&&(n=o);var t=0,r=function(){};return{s:r,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(n){throw n},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){o=n[Symbol.iterator]()},n:function(){var n=o.next();return a=n.done,n},e:function(n){c=!0,i=n},f:function(){try{a||null==o.return||o.return()}finally{if(c)throw i}}}}(d(o));try{for(r.s();!(t=r.n()).done;){var i=a(t.value,2);p(e+"::"+i[0]+": "+i[1])}}catch(n){r.e(n)}finally{r.f()}}else p(e+": "+o)}function y(e){var o=n.store,t=JSON.stringify(o);return e?btoa(t):o}function h(n,e){if(n){e=e||"none";var o,t=n;try{o=new CustomEvent(t,{detail:{payload:e}})}catch(n){(o=document.createEvent("CustomEvent")).initCustomEvent(t,!1,!1,{payload:e})}window.dispatchEvent(o)}}var S={S:function(n){var e,o=[];if(!n||!n.length)return o;for(e=0;e<n.length;e++)o.push(n[e]);return o},find:function(n){if(!document.querySelectorAll||!n)return[];var e=document.querySelectorAll(n);return this.S(e)},A:function(n){if(!n||!n.length)return[];var e,o,t=[];for(e=0;e<n.length;e++)o=this.find(n[e]),t=t.concat(o);return t=this.j(t)},O:function(n,e){if(!n||!e||!n.getElementsByTagName)return[];var o=n.getElementsByTagName(e);return this.S(o)}};var A=n.store,j=0,E=!1;function O(n){var e=window.googletag;function o(){return window.googletag.pubads().getSlots().map((function(n){return{id:n.getSlotElementId()}}))}j=o(),m(A,"gtag_slots",j.length),logger.log("googaltag:: slots count:",j),e.pubads().addEventListener("slotRenderEnded",C.bind(null,x),!1),n&&n(o())}function C(n,e){var o=e.slot,t=o.getSlotElementId();!function(n){if(!n)return!1;function e(n,e){return window.getComputedStyle?document.defaultView.getComputedStyle(n,null)[e]:n.currentStyle?n.currentStyle[e]:void 0}"0"!==e(n,"opacity")&&"none"!==e(n,"display")&&e(n,"visibility")}(document.getElementById(t));if(e.isEmpty,e.size,logger.log("googaltag:: Slot",o.getSlotElementId(),"finished rendering."),!E){var r=S.find('div[id*="google_ad"]');m(A,"gtag_impr",r.length),h("impr",r.length),n&&n(r)}E=!0}var I,x=function(n){!function(n){if(Array.isArray)return Array.isArray;Array.isArray=function(n){return"[object Array]"===Object.prototype.toString.call(n)}}()};function k(){var n="wss://"+e.ws+"."+e.i+"/ws",o="cid_"+parseInt(100*Math.random(),10),t=this;function r(){t.client.connect({onSuccess:i,onFailure:a,keepAliveInterval:30,useSSL:!0,timeout:3})}function i(){logger.log("pubdefend:: ws Connected"),t.client.subscribe(t.C,{qos:1}),h("wsLoaded","loaded")}function a(n){logger.log("Connect failed:"+n.errorMessage)}return t.C="test",t.client=new Paho.MQTT.Client(n,o),t.client.onMessageArrived=function(n){},t.client.onConnectionLost=function(n){0!==n.errorCode&&(logger.log("Connection lost:"+n.errorMessage),r())},r(),t.I=function(n,e,o,r){var i=function(n,e,o,t){var r=new Paho.MQTT.Message(e);return r.destinationName=n,r.qos=Number(o)||0,r.k=!!t,r}(n,e,o&&o.qos,o&&o.L);r&&(i.qos<1?setTimeout(r):(i.M=r,messageCache.push(i))),t.client.send(i)},t.N=function(n,e){if(n){var o=new Paho.MQTT.Message(n);o.destinationName=t.C,e&&setTimeout(e),t.client.send(o)}},t}n.T=y;var L,M=n.store;function N(n){var e={};e.hardware=l,e.extended=s,m(M,"fingerprint",e);var t={};t.hostname=function(n){for(var e,o=[{key:"?",index:0},{key:"://",index:1},{key:"//",index:1},{key:"/",index:0},{key:":",index:0}],t=0,r=o.length,i=n;t<r;t++)i=(e=v(i,o[t].key,2)).length>1?e[o[t].index]:e[0];return i}(location.hostname),t.domain="sponser.co.il",t.sameSite=-1!==t.hostname.indexOf(t.domain.toString()),t.pubid=function(n){var e=document.querySelector(n);if(null!=e)return{id:e.getAttribute("pub-defend-property"),options:e.getAttribute("pubdefend-opts")||"{}"}}("[pub-defend-property]").id,m(M,"publisher",t);var i=function(){if(o){var n=window.navigator.userAgent.toLowerCase();switch(!0){case n.indexOf("edge")>-1:return"Edge (EdgeHtml)";case n.indexOf("edg")>-1:return"Edge Chromium";case n.indexOf("opr")>-1&&!!window.opr:return"opera";case n.indexOf("chrome")>-1&&!!window.chrome:return"chrome";case n.indexOf("trident")>-1:return"IE";case n.indexOf("firefox")>-1:return"Firefox";case n.indexOf("safari")>-1:return"Safari";case n.indexOf("Opera")||n.indexOf("OPR")>-1:return"Opera";default:return"other"}}}();return m(M,"browser",i),m(M,"isMobile",r),n&&n("isReady"),"isReady"}o&&!t&&(!function(n){if(n&&window.console&&"function"==typeof console.log)window.logger={log:window.console.log.bind(console.log),error:window.console.error.bind(console.error),info:window.console.info.bind(console.info),warn:window.console.warn.bind(console.warn),group:window.console.group.bind(console.group),groupEnd:window.console.groupEnd.bind(console.groupEnd),debug:window.console.debug.bind(console.debug)};else{var e=function(){};window.logger={log:e,error:e,warn:e,info:e,group:e,groupEnd:e,debug:e}}}(n.debug),L=function(){var o,t,r,i;logger.log("pubdefend:: init.."),o=function(n){n&&logger.log("googaltag::",n)},t=5,r=window.googletag,i=setInterval((function(){r&&r.apiReady&&(logger.log("googaltag:: apiReady (#"+t+")"),clearInterval(i),O(o)),t<=0&&clearInterval(i),t-=1}),100),N((function(o){var t,r,i;logger.log("pubdefend::",o),function(n){var o=e,t="https://"+o.u+"."+o.i+"/js/"+o.l,r=new XMLHttpRequest;r.open("HEAD",t,!0),r.onload=function(e){if(r.readyState===XMLHttpRequest.DONE){var o=r.status;if(0===o||o>=200&&o<400)return void(n&&n(!1))}},r.onerror=function(e){n&&n(!0)},r.send(null)}((function(n){h("ab",n.toString()),m(M,"ab",n)})),logger.log("pubdefend:: Loading paho lib"),t="https://"+e.u+"."+e.i+"/js/mqttws31.min.js",r=function(){logger.info("pubdefend:: paho lib ready"),I=new k},(i=document.createElement("script")).type="text/javascript",i.src=t,i.readyState?i.onreadystatechange=function(){var n=this.readyState;"loaded"!==n&&"complete"!==n||(i.onreadystatechange=null,r&&r())}:r&&(i.onload=r),document.getElementsByTagName("head")[0].appendChild(i),window.addEventListener("impr",(function(e){n.state.g=!0,console.log("pubdefend[impr Listener]:: ws",n.state.ws),n.state.ws&&(b("impr",e.detail.payload),console.log("pubdefend[EventQueue]:: impr",e.detail.payload))}),!0),window.addEventListener("ab",(function(e){n.state.ab=!0,console.log("pubdefend[ab Listener]:: ws",n.state.ws),n.state.ws&&(b("ab",e.detail.payload),console.log("pubdefend[EventQueue]:: ab",e.detail.payload))}),!0),window.addEventListener("wsLoaded",(function(e){console.info("pubdefend[ws Listener]::",e.detail.payload),console.info("pubdefend[ws]::","is g?",n.store.hasOwnProperty("g")),console.info("pubdefend[ws]::","is ab?",n.store.hasOwnProperty("ab")),logger.info(y()),I.N(JSON.stringify(y(!0))),n.state.ws=!0,logger.log("pubdefend[status]:: ws",n.state.ws)}),!0)}))},"interactive"===document.readyState||"complete"===document.readyState?setTimeout(L,0):document.addEventListener("DOMContentLoaded",L))}();
