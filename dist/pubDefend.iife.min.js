var pubdefend=function(){"use strict";var n=window.pubDefend||window.pubdefend||{};n.debug=!0,n.store={},n.t=[],n.o=[],n.domain="sponser.co.il";var e={domain:"pubdefend.com",i:"c",u:"ws",l:"ad_banner.js"},t="undefined"!=typeof window,o=t&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),r=(t&&document.createElement("p"),/iPhone|iPad|iPod|Android/i.test(navigator.userAgent));function i(n){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function a(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n)){var t=[],o=!0,r=!1,i=void 0;try{for(var a,u=n[Symbol.iterator]();!(o=(a=u.next()).done)&&(t.push(a.value),!e||t.length!==e);o=!0);}catch(c){r=!0,i=c}finally{try{o||null==u.return||u.return()}finally{if(r)throw i}}return t}}(n,e)||u(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(n,e){if(n){if("string"==typeof n)return c(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?c(n,e):void 0}}function c(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,o=new Array(e);t<e;t++)o[t]=n[t];return o}var f=Object.entries?Object.entries:function(n){return Object.keys(n).reduce((function(e,t){return e.push([t,n[t]]),e}),[])},d=function(n,e){var t=window,o=t.screen,r=t.userAgent,i=t.language,u=t.languages,c=t.platform,d=t.hardwareConcurrency,l=t.deviceMemory,s=o.colorDepth,v=o.availHeight,p=o.availWidth,m=f(t.navigator.plugins).map((function(n){return a(n,2)[1].name})),b=(new Date).getTimezoneOffset(),y=Intl.DateTimeFormat().resolvedOptions().timeZone,w="ontouchstart"in window,g=function(){try{var n=document.createElement("canvas"),e=n.getContext("2d");return e.textBaseline="top",e.font="14px 'Arial'",e.textBaseline="alphabetic",e.fillStyle="#f60",e.fillRect(125,1,62,20),e.fillStyle="#069",e.fillText("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ`~1!2@3#4$5%6^7&8*9(0)-_=+[{]}|;:',<.>/?",2,15),e.fillStyle="rgba(102, 204, 0, 0.7)",e.fillText("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ`~1!2@3#4$5%6^7&8*9(0)-_=+[{]}|;:',<.>/?",4,17),n.toDataURL()}catch(t){return t}}(),h=window.doNotTrack||navigator.doNotTrack||navigator.msDoNotTrack||"v"in window.external?!("1"!=window.doNotTrack&&"yes"!=navigator.doNotTrack&&"1"!=navigator.doNotTrack&&"1"!=navigator.msDoNotTrack&&!window.external.v()):void 0,S=function(n){for(var e,t,o,r=3&n.length,i=n.length-r,a=3432918353,u=461845907,c=0;c<i;c++)o=255&n.charCodeAt(c)|(255&n.charCodeAt(++c))<<8|(255&n.charCodeAt(++c))<<16|(255&n.charCodeAt(++c))<<24,++c,e=27492+(65535&(t=5*(65535&(e=(e^=o=(65535&(o=(o=(65535&o)*a+(((o>>>16)*a&65535)<<16)&4294967295)<<15|o>>>17))*u+(((o>>>16)*u&65535)<<16)&4294967295)<<13|e>>>19))+((5*(e>>>16)&65535)<<16)&4294967295))+((58964+(t>>>16)&65535)<<16);var f=i-1;switch(o=0,r){case 3:o^=(255&n.charCodeAt(f+2))<<16;break;case 2:o^=(255&n.charCodeAt(f+1))<<8;break;case 1:o^=255&n.charCodeAt(f)}return e^=o=(65535&(o=(o=(65535&o)*a+(((o>>>16)*a&65535)<<16)&4294967295)<<15|o>>>17))*u+(((o>>>16)*u&65535)<<16)&4294967295,e^=n.length,e=2246822507*(65535&(e^=e>>>16))+((2246822507*(e>>>16)&65535)<<16)&4294967295,e=3266489909*(65535&(e^=e>>>13))+((3266489909*(e>>>16)&65535)<<16)&4294967295,(e^=e>>>16)>>>0}(n?JSON.stringify({platform:c,hardwareConcurrency:d,deviceMemory:l,colorDepth:s,availWidth:p,availHeight:v,p:w,canvas:g}):JSON.stringify({userAgent:r,language:i,languages:u,platform:c,hardwareConcurrency:d,deviceMemory:l,plugins:m,colorDepth:s,availWidth:p,availHeight:v,m:b,g:y,p:w,canvas:g,doNotTrack:h}));if(!e)return S;e(S)},l=d(!0),s=d(!1),v=function(n){return"object"===i(n)&&function(n){return null!=n}(n)&&!Array.isArray(n)&&!(n instanceof RegExp)&&!(n instanceof String)&&!(n instanceof Number)};function p(n,e,t){var o=n.split(e);return o.slice(0,t-1).concat(o.length>=t?o.slice(t-1).join(e):[])}function m(n){if(n){var e=document.createElement("li");e.className="text-small font-normal",e.style.cssText="color: #99b8fd";var t=document.createTextNode(n);e.appendChild(t),document.getElementById("log").appendChild(e)}}function b(n,e,t){if(v(n))if(n.hasOwnProperty(e)||(n[e]=t),n[e]=t,v(t)){var o,r=function(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=u(n))){t&&(n=t);var o=0,r=function(){};return{s:r,n:function(){return o>=n.length?{done:!0}:{done:!1,value:n[o++]}},e:function(n){throw n},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var n=t.next();return a=n.done,n},e:function(n){c=!0,i=n},f:function(){try{a||null==t.return||t.return()}finally{if(c)throw i}}}}(f(t));try{for(r.s();!(o=r.n()).done;){var i=a(o.value,2);m(e+"::"+i[0]+": "+i[1])}}catch(c){r.e(c)}finally{r.f()}}else m(e+": "+t)}function y(e){var t=n.store,o=JSON.stringify(t);return e?btoa(o):t}var w={h:function(n){var e,t=[];if(!n||!n.length)return t;for(e=0;e<n.length;e++)t.push(n[e]);return t},find:function(n){if(!document.querySelectorAll||!n)return[];var e=document.querySelectorAll(n);return this.h(e)},S:function(n){if(!n||!n.length)return[];var e,t,o=[];for(e=0;e<n.length;e++)t=this.find(n[e]),o=o.concat(t);return this.O(o)},j:function(n,e){if(!n||!e||!n.getElementsByTagName)return[];var t=n.getElementsByTagName(e);return this.h(t)}},g=n.store,h=0,S=!1,O=function(n,e){var t=e.slot,o=t.k();if(function(n){if(!n)return!1;function e(n,e){return window.getComputedStyle?document.defaultView.getComputedStyle(n,null)[e]:n.currentStyle?n.currentStyle[e]:void 0}"0"!==e(n,"opacity")&&"none"!==e(n,"display")&&e(n,"visibility")}(document.getElementById(o)),console.log("googaltag Slot",t.k(),"finished rendering."),!S){var r=w.find('div[id*="google_ad"]');b(g,"gtag_impr",r.length),n&&n(r)}S=!0},j=function(n){},k=e;function A(){var n="cid_"+parseInt(100*Math.random(),10),e=this;function t(){e.A.connect({C:o,I:r,N:30,T:!0,timeout:3})}function o(){console.log("pubdefend:: ws Connected"),e.A.subscribe(e.M,{P:1}),function(n,e){var t,o=n;try{t=new CustomEvent(o,{detail:{data:"none"}})}catch(r){(t=document.createEvent("CustomEvent")).initCustomEvent(o,!1,!1,{R:instance})}window.dispatchEvent(t)}("wsLoaded")}function r(n){console.log("Connect failed:"+n.L)}return e.M="test",e.A=new Paho.MQTT.Client("wss://ws.pubdefend.com/ws",n),e.A.H=function(n){},e.A._=function(n){0!==n.errorCode&&(console.log("Connection lost:"+n.L),t())},t(),e.D=function(n,t,o,r){var i=function(n,e,t,o){var r=new Paho.MQTT.Message(e);return r.J=n,r.P=Number(t)||0,r.q=!!o,r}(n,t,o&&o.P,o&&o.W);r&&(i.P<1?setTimeout(r):(i.F=r,messageCache.push(i))),e.A.send(i)},e.X=function(n,t){if(n){var o=new Paho.MQTT.Message(n);o.J=e.M,t&&setTimeout(t),e.A.send(o)}},e}n.B=function(){var n={},e=function(n){var e,t,o=n+"=",r=document.cookie.split(";");for(e=0;e<r.length;e++){for(t=r[e];" "===t.charAt(0);)t=t.substring(1,t.length);if(0===t.indexOf(o))return unescape(t.substring(o.length,t.length))}return null}("_pbdfndEvents"),t=JSON.parse(e);for(var o in t)n[t[o].U]=t[o].$;console.log(n),console.log(btoa(n))},n.G=y;var E,C=window,x=!!C.K&&C.K,I=n.store;function N(e){!function(n){var e=setInterval((function(){x&&x.V&&(console.log("googaltag apiReady:",x&&x.V),clearInterval(e),function(n){var e=googletag.pubads();h=e.Y().length,b(g,"gtag_slots",h),g.Z?n&&n("blocked"):(console.debug("pubdefend:: No adblocker detected. listen to gtag"),e.addEventListener("slotRenderEnded",O.bind(null,j),!1)),console.log("googaltag slots:",h)}(n))}),100)}((function(n){console.log("gtag::",n)}));var o={};o.nn=l,o.extend=s,b(I,"fingerprint",o);var i={};i.hostname=function(n){for(var e,t=[{key:"?",index:0},{key:"://",index:1},{key:"//",index:1},{key:"/",index:0},{key:":",index:0}],o=0,r=t.length,i=n;o<r;o++)i=(e=p(i,t[o].key,2)).length>1?e[t[o].index]:e[0];return i}(location.hostname),i.domain=n.domain,i.en=-1!==i.hostname.indexOf(i.domain.toString()),i.tn=function(){var n=document.querySelector("[pub-defend-property]");if(null!=n)return{id:n.getAttribute("pub-defend-property"),options:n.getAttribute("pubdefend-opts")||"{}"}}().id,b(I,"publisher",i);var a=function(){if(t){var n=window.navigator.userAgent.toLowerCase();switch(!0){case n.indexOf("edge")>-1:return"Edge (EdgeHtml)";case n.indexOf("edg")>-1:return"Edge Chromium";case n.indexOf("opr")>-1&&!!window.opr:return"opera";case n.indexOf("chrome")>-1&&!!window.chrome:return"chrome";case n.indexOf("trident")>-1:return"IE";case n.indexOf("firefox")>-1:return"Firefox";case n.indexOf("safari")>-1:return"Safari";case n.indexOf("Opera")||n.indexOf("OPR")>-1:return"Opera";default:return"other"}}}();return b(I,"browser",a),b(I,"isMobile",r),function(n){var e="https://"+k.i+"."+k.domain+"/js/"+k.l,t=new XMLHttpRequest;t.open("HEAD",e,!0),t.onload=function(e){if(t.readyState===XMLHttpRequest.DONE){var o=t.status;if(0===o||o>=200&&o<400)return void(n&&n(!1))}},t.onerror=function(e){n&&n(!0)},t.send(null)}((function(n){b(I,"blocked",n)})),e&&e("isReady"),"isReady"}return t&&!o&&(E=function(){console.log("pubdefend:: init.."),N((function(n){var t,o,r;console.log("pubdefend::",n),console.log("pubdefend:: Loading paho lib"),t="https://"+e.i+"."+e.domain+"/js/mqttws31.min.js",o=function(){console.log("pubdefend:: paho lib ready");var n=new A;window.addEventListener("wsLoaded",(function(e){console.log("listenToWs",e.details),n.X(JSON.stringify(y()))}),!0)},(r=document.createElement("script")).type="text/javascript",r.src=t,r.readyState?r.onreadystatechange=function(){var n=this.readyState;"loaded"!==n&&"complete"!==n||(r.onreadystatechange=null,o&&o())}:o&&(r.onload=o),document.getElementsByTagName("head")[0].appendChild(r)}))},"interactive"===document.readyState||"complete"===document.readyState?setTimeout(E,0):document.addEventListener("DOMContentLoaded",E)),n}();
